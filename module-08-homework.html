<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>CMPS 260: Module 8 Homework</title>
<style>* { font-family: monospace; }</style>
<script>
//--------------//
// Dictionaries //
//--------------//
console.log("Dictionaries");

// 1. Implement the dictionary data structure using the prototype (as opposed
//    to the version we wrote in class).

function Dictionary() {
  this.items = {};

  Dictionary.prototype.set = function(key, value) {
    this.items[key] = value;
  };
  Dictionary.prototype.delete = function(key) {
    // delete a key-value pair
    // ...
    if(this.has(key)) {
      delete items[key];
      return true;
    }
    return false;
  };

  Dictionary.prototype.has = function(key) {
    // return true if key is in the dictionary, false otherwise
    // ...
    return key in items;
  };

  Dictionary.prototype.get = function(key) {
    // return the value that matches key
    // ...
  };

  Dictionary.prototype.clear = function() {
    // remove all key-value pairs
    // ...
  };

  Dictionary.prototype.size = function() {
    // return the number of key-value pairs
    // ...
  };

  Dictionary.prototype.keys = function() {
    // return an array of all the keys
    // ...
    return object.keys(items);
  };
  
  Dictionary.prototype.values = function() {
    // return an array of all the values
    // ...
    var values = [];
    for(var key in this.items) {
        values.push(this.items[key]);
    }
    return values;
  };

  Dictionary.prototype.getItems = function() {
    return this.items;
  };
}

// ...


// 2. Run some tests that show that your code works.


var dictionary = new Dictionary();
dictionary.set('Gandalf', 'gandalf@email.com');
dictionary.set('John', 'johnsnow@email.com');

console.log(dictionary.values());

//----------------//
// The hash table //
//----------------//
console.log("The hash table");

// 1. Implement the hash table data structure using the prototype (as opposed
//    to the version we wrote in class). Use separate chaining to resolve
//    collisions and the djb2 hash function for hashing.

function HashTable() {
  this.tables = [];


  function loseloseHashCode(key) {
    var hash = 0;
    for (var i = 0; i < this.key.length; i++) {
      hash += key.charCodeAt(i);
    }
    return hash % 37;
  }

  loseloseHashCode.prototype.put = function(key, value) {
    var position = this.loseloseHashCode(key); 
    this.table[position] = value;
  };

  loseloseHashCode.prototype.remove = function(key) {
    // remove an item
    // ...
    table[loseloseHashCode (key)] = undefined; 
  };

  loseloseHashCode.prototype.get = function(key) {
    // return the value that matches key
    return table[loseloseHashCode(key)];
  };

  loseloseHashCode.prototype.print = function() {
    // print the content of the hash table
    for (var i = 0; i < this.table.length; i++) {
      if (table[i] !== undefined) {
        console.log(i + ": " + table[i]);
      }
    }
  };
}

// 2. Run some tests that show that your code works.

var hash = new HashTable();
hash.put('Gandalf', 'gandalf@email.com');
hash.put('Tim', 'tim@email.com');
hash.put('John', 'john@email.com');

console.log(hash.values());
console.log(hash.get("Tim"));

// 3. The book discusses linear probing but their approach has a serious
//    problem. What is the issue?
//    HINT: The issue can occur when there is a hash collision (two values
//          mapped to the same index) in combination with a delete operation.



//-------------------//
// The ES6 Map class //
//-------------------//
console.log("The ES6 Map class");

// Skip.



//-------------------------------------//
// The ES6 WeakMap and WeakSet classes //
//-------------------------------------//
console.log("The ES6 WeakMap and WeakSet classes");

// Skip.



//---------//
// Project //
//---------//
console.log("Project");

// 1. Complete the method below that adds all key-value pairs from one
//    dictionary into another. See also the example below.

Dictionary.prototype.merge = function(dict) {
  // add all key-value pairs in 'dict' to 'this'
  for ( var key in dict.items) {
    this.set(key, dict.get(key));
  }
};

// Test your code by uncommenting these lines:
var dict1 = new Dictionary();
dict1.set("key1", "val1");
dict1.set("key2", "val2");
dict1.set("key3", "val3");
var dict2 = new Dictionary();
dict2.set("key3", "val3b");
dict2.set("key4", "val4");
dict1.merge(dict2);
dict1.print(); // should contain key1-val1, key2-val2, key3-val3b, key4-val4

console.log(dict1);

</script>
</head>
<body>
  See console!
</body>
</html>
